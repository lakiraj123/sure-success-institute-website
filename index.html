<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enroll Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div class="max-w-2xl mx-auto my-10 bg-white p-8 rounded-lg shadow-md">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Enroll Now</h2>

  <!-- FORM START -->
  <form 
    name="enroll-form" 
    method="POST" 
    data-netlify="true"
    onsubmit="showPopup(event)"
    class="space-y-4"
  >
    <!-- Hidden Netlify Input -->
    <input type="hidden" name="form-name" value="enroll-form" />

    <!-- Full Name -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="name">Full Name *</label>
      <input 
        type="text" 
        name="name" 
        id="name" 
        required
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="email">Email *</label>
      <input 
        type="email" 
        name="email" 
        id="email" 
        required
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Phone Number -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="phone">Phone Number *</label>
      <input 
        type="text" 
        name="phone" 
        id="phone" 
        required
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- City -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="city">City *</label>
      <input 
        type="text" 
        name="city" 
        id="city" 
        required
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Course Name (Text Field Now) -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="course">Course Name *</label>
      <input 
        type="text" 
        name="course" 
        id="course" 
        required
        placeholder="e.g., Web Development, Digital Marketing, etc."
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Message -->
    <div>
      <label class="block text-sm font-medium text-gray-700" for="message">Message</label>
      <textarea 
        name="message" 
        id="message" 
        rows="4"
        class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      ></textarea>
    </div>

    <!-- Submit Button -->
    <div class="text-center">
      <button 
        type="submit" 
        class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700"
      >
        Submit Application
      </button>
    </div>
  </form>
  <!-- FORM END -->
</div>

<!-- ✅ Popup Modal (Hidden by Default) -->
<div 
  id="popup-modal"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
>
  <div class="bg-white p-6 rounded-lg max-w-md text-center">
    <h3 class="text-lg font-bold text-green-600 mb-2">
      ✅ Thank you for contacting us!
    </h3>
    <p class="text-gray-600">
      We have received your application and will get back to you soon.
    </p>
    <button 
      onclick="closePopup()" 
      class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg"
    >
      Close
    </button>
  </div>
</div>

<!-- ✅ JavaScript to Handle Popup & Form Reset -->
<script>
  function showPopup(event) {
    event.preventDefault();  // Prevent form submission

    // Submit form using Netlify
    const form = event.target;
    const formData = new FormData(form);

    fetch('/', {
      method: 'POST',
      body: formData,
    })
    .then(() => {
      // Show Popup
      document.getElementById('popup-modal').classList.remove('hidden');

      // Clear the form
      form.reset();
    })
    .catch(() => {
      alert('Something went wrong. Please try again.');
    });
  }

  function closePopup() {
    document.getElementById('popup-modal').classList.add('hidden');
  }
</script>

</body>
</html>
